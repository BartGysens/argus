<?php
/**
 * @file
 * Code for the Gebruikers feature.
 */
include_once 'argus_gebruikers.features.inc';

/**
 * Implements hook_theme_registry_alter().
 */
function argus_gebruikers_theme_registry_alter(&$theme_registry) {
	$theme_registry['user_profile']['template'] = drupal_get_path('module', 'argus_gebruikers') . '/templates/user-profile';
	$theme_registry['user_profile']['theme path'] = drupal_get_path('module', 'argus_gebruikers');
}

/**
 * Hook preprocess for user_profile
 *
 * @param type $variables        	
 */
function argus_gebruikers_preprocess_user_profile(&$variables) {
	$account = $variables ['elements'] ['#account'];
	
	$current_user_roles = -1;
	if (count($account->field_user_sms_basisrol)){
		$current_user_roles = $account->field_user_sms_basisrol [LANGUAGE_NONE] [0] ['value'];
	}
	switch ($current_user_roles) {
		case 1 : // leerling
			require_once 'includes/user-profile--preprocessor-pupil.inc.php';
			break;
		case 0 : // leerkracht
		case 30 : // directie
			require_once 'includes/user-profile--preprocessor-employee.inc.php';
			break;
		default : // andere (13)
			require_once 'includes/user-profile--preprocessor-other.inc.php';
			break;
	}
}